{"version":3,"file":"feedback.js","sources":["../src/js/feedback.js"],"sourcesContent":["\"use strict\";\n\nimport iziToast from \"izitoast\";\n\nconst lsKey = \"feedback-form-state\"\nconst form = document.querySelector(\"#feedback-form\");\n\nfunction formData() {\n  const formData = new FormData(form);\n  const entries = formData.entries();\n  const data = Object.fromEntries(\n    Array.from(entries, ([key, value]) => [key, value.trim()])\n  );\n  return data;\n}\n\nfunction validateState(state) {\n  const { email, message } = state;\n  const isValidEmail = email.length > 0 && email.includes(\"@\");\n  const isValidMessage = message.length > 0;\n  return isValidEmail && isValidMessage;\n}\n\nfunction loadState() {\n  const state = (() => {\n    try {\n      return JSON.parse(localStorage.getItem(lsKey)) || {};\n    } catch (e) {\n      return {};\n    }\n  })();\n  form.elements.email.value = state.email || \"\";\n  form.elements.message.value = state.message || \"\";\n}\n\nfunction saveState() {\n  const state = formData();\n  localStorage.setItem(lsKey, JSON.stringify(state));\n}\n\naddEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const state = formData();\n  if (!validateState(state)) {\n    iziToast.error({\n      title: \"Error\",\n      message: \"Fill in all the fields\",\n    });\n    return;\n  }\n  console.log(state);\n  form.reset();\n  localStorage.removeItem(lsKey);\n});\n\nform.addEventListener(\"input\", saveState);\n\nloadState();"],"names":["lsKey","form","formData","entries","key","value","validateState","state","email","message","isValidEmail","isValidMessage","loadState","saveState","iziToast"],"mappings":"wIAIA,MAAMA,EAAQ,sBACRC,EAAO,SAAS,cAAc,gBAAgB,EAEpD,SAASC,GAAW,CAElB,MAAMC,EADW,IAAI,SAASF,CAAI,EACT,UAIzB,OAHa,OAAO,YAClB,MAAM,KAAKE,EAAS,CAAC,CAACC,EAAKC,CAAK,IAAM,CAACD,EAAKC,EAAM,KAAM,CAAA,CAAC,CAC7D,CAEA,CAEA,SAASC,EAAcC,EAAO,CAC5B,KAAM,CAAE,MAAAC,EAAO,QAAAC,CAAS,EAAGF,EACrBG,EAAeF,EAAM,OAAS,GAAKA,EAAM,SAAS,GAAG,EACrDG,EAAiBF,EAAQ,OAAS,EACxC,OAAOC,GAAgBC,CACzB,CAEA,SAASC,GAAY,CACnB,MAAML,GAAS,IAAM,CACnB,GAAI,CACF,OAAO,KAAK,MAAM,aAAa,QAAQP,CAAK,CAAC,GAAK,EACnD,MAAW,CACV,MAAO,EACR,CACL,KACEC,EAAK,SAAS,MAAM,MAAQM,EAAM,OAAS,GAC3CN,EAAK,SAAS,QAAQ,MAAQM,EAAM,SAAW,EACjD,CAEA,SAASM,GAAY,CACnB,MAAMN,EAAQL,IACd,aAAa,QAAQF,EAAO,KAAK,UAAUO,CAAK,CAAC,CACnD,CAEA,iBAAiB,SAAW,GAAM,CAChC,EAAE,eAAc,EAChB,MAAMA,EAAQL,IACd,GAAI,CAACI,EAAcC,CAAK,EAAG,CACzBO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACf,CAAK,EACD,MACD,CACD,QAAQ,IAAIP,CAAK,EACjBN,EAAK,MAAK,EACV,aAAa,WAAWD,CAAK,CAC/B,CAAC,EAEDC,EAAK,iBAAiB,QAASY,CAAS,EAExCD,EAAW"}